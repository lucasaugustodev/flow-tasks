<header class="topbar">
  <div class="topbar-left">
    <div class="logo-box">
      <span class="logo-text">PT</span>
    </div>
    <div class="brand">
      <h1>Painel de Projetos</h1>
      <p class="caption">Visão geral — organizar, priorizar e executar</p>
    </div>
  </div>

  <div class="topbar-right">
    <!-- Search -->
    <div class="search">
      <input aria-label="Pesquisar" placeholder="Pesquisar tarefas, projetos..." />
      <button class="icon-btn" aria-label="Buscar">
        <i class="fa fa-search"></i>
      </button>
    </div>

    <!-- Quick action -->
    <a routerLink="/kanban" class="btn btn-secondary btn-small">
      <i class="icon-plus"></i>
      Nova tarefa
    </a>

    <!-- User Menu -->
    <div class="user-section">
      <div class="user-menu" (clickOutside)="closeUserMenu()">
        <button
          class="user-button"
          (click)="toggleUserMenu()"
          [class.active]="isUserMenuOpen"
        >
          <div class="user-avatar">
            <i class="icon-user"></i>
          </div>
          <div class="user-info" *ngIf="currentUser">
            <span class="user-name">{{ currentUser.fullName }}</span>
            <span class="user-email caption">{{ currentUser.email }}</span>
          </div>
          <i class="icon-chevron-down" [class.rotated]="isUserMenuOpen"></i>
        </button>

        <!-- Dropdown Menu -->
        <div class="user-dropdown" *ngIf="isUserMenuOpen">
          <div class="dropdown-header">
            <div class="user-avatar-large">
              <i class="icon-user"></i>
            </div>
            <div class="user-details" *ngIf="currentUser">
              <h4 class="user-name">{{ currentUser.fullName }}</h4>
              <p class="user-email caption">{{ currentUser.email }}</p>
              <p class="user-username caption">@{{ currentUser.username }}</p>
            </div>
          </div>

          <div class="dropdown-divider"></div>

          <div class="dropdown-menu">
            <button class="dropdown-item" (click)="navigateTo('/dashboard')">
              <i class="icon-home"></i>
              Dashboard
            </button>
            <button class="dropdown-item" (click)="navigateTo('/projects')">
              <i class="icon-folder"></i>
              Projetos
            </button>
            <button class="dropdown-item" (click)="navigateTo('/kanban')">
              <i class="icon-tasks"></i>
              Kanban
            </button>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item" (click)="navigateTo('/settings')">
              <i class="icon-settings"></i>
              Configurações
            </button>
            <button class="dropdown-item logout" (click)="logout()">
              <i class="icon-logout"></i>
              Sair
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
